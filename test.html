<!DOCTYPE html>

<script>
    let socket = new WebSocket('wss://node-xkap.onrender.com/ws', ['echo-protocol', 'website']);

    document.addEventListener("keydown", (event) => {
        let jsonText = `{"key": "${event.key}", "type": "KeyDown"}`;

        socket.send(jsonText);
    });

    document.addEventListener('mousemove', (event) => {
        let jsonText = `{"x": ${event.clientX}, 
                        "y": ${event.clientY},
                        "screenHeight": ${screen.availHeight},
                        "screenWidth": ${screen.availWidth}, 
                        "type": "MouseMove"}`;

        socket.send(jsonText);
    });

    document.onclick = (event) => {
        let jsonText = `{"buttons": ${event.buttons}, "ctrlKey": ${event.ctrlKey}, "type": "MouseDown"}`;

        socket.send(jsonText);
    };
</script>

<body>
    <p>Welcome to WebSockets. Click here to start receiving messages.</p>
    <button id="websocket-button" onclick = "test()">Click me</button>
    <div id="websocket-returns"></div>
</body>
